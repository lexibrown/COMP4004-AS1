2017-10-07 23:37:02,573 INFO operation_file [main] [/127.0.0.1:51341] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-07 23:37:02,573 INFO operation_file [main] SENT: 
 
2017-10-07 23:37:02,575 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:51341 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-07 23:37:02,964 INFO operation_file [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:51341 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-07 23:37:02,964 INFO operation_file [Thread-1] SENT: 
 
2017-10-07 23:37:02,964 INFO EventSourceImpl [Thread-0] [/127.0.0.1:51341] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-07 23:40:25,144 FATAL ThreadWithReactor [Thread-0] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-08 01:34:50,299 INFO BufferedLoggingWriter [main] [/127.0.0.1:62907] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-08 01:34:50,299 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-08 01:34:50,300 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:62907 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-08 01:34:50,619 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:62907 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-08 01:34:50,619 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:34:50,619 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62907] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-08 01:37:20,298 FATAL ThreadWithReactor [Thread-0] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-08 01:38:05,923 INFO BufferedLoggingWriter [main] [/127.0.0.1:62935] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"test"} 
2017-10-08 01:38:05,924 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-08 01:38:05,925 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:62935 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"test"} 
2017-10-08 01:38:06,238 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:62935 SENT: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-08 01:38:06,238 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:38:06,239 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62935] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-08 01:38:43,525 INFO BufferedLoggingWriter [Thread-0] [/127.0.0.1:62935] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-08 01:38:43,526 INFO BufferedLoggingWriter [Thread-0] SENT: 
 
2017-10-08 01:38:43,526 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:62935 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-08 01:38:43,527 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:62935 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-08 01:38:43,527 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:38:43,527 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62935] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-08 01:39:04,715 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:62935] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USER":"clerk"} 
2017-10-08 01:39:04,715 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:39:04,716 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:62935 RECEIVED: {"MESSAGE":"LOGOUT","USER":"clerk"} 
2017-10-08 01:39:04,716 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:62935 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-08 01:39:04,716 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:39:04,716 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62935] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-08 01:39:05,043 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-08 01:39:05,046 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:62935 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-08 01:39:05,046 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-08 01:39:05,046 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:160)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:37:01,452 INFO BufferedLoggingWriter [main] [/127.0.0.1:50197] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:37:01,453 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:37:01,454 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50197 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:37:01,771 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50197 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:37:01,771 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:37:01,771 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50197] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:37:42,316 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50197] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:37:42,317 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:37:42,317 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50197 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:37:42,318 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50197 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:37:42,318 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:37:42,318 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50197] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:37:49,868 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:37:49,870 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50197 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:37:49,870 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:37:49,870 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:38:01,212 INFO BufferedLoggingWriter [main] [/127.0.0.1:50203] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:38:01,213 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:38:01,213 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50203 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:38:01,213 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50203 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:38:01,214 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 02:38:01,214 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50203] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:39:50,167 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50203] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:39:50,167 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:39:50,167 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50203 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:39:50,168 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50203 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:39:50,168 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 02:39:50,168 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50203] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:39:57,549 FATAL ThreadWithReactor [Thread-2] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:39:57,550 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50203 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:39:57,550 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 02:39:57,550 FATAL Server [Thread-2] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:40:05,108 INFO BufferedLoggingWriter [main] [/127.0.0.1:50206] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:40:05,109 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:40:05,110 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50206 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:40:05,110 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50206 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:40:05,111 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 02:40:05,111 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50206] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:41:44,471 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50206] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:41:44,471 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:41:44,472 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50206 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:41:44,472 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50206 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:41:44,472 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 02:41:44,472 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50206] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:41:46,245 FATAL ThreadWithReactor [Thread-3] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:41:46,245 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50206 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:41:46,245 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 02:41:46,245 FATAL Server [Thread-3] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:41:51,643 INFO BufferedLoggingWriter [main] [/127.0.0.1:50254] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:41:51,644 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:41:51,645 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50254 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:41:51,645 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50254 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:41:51,645 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 02:41:51,645 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50254] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:42:11,224 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50254] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:42:11,224 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:42:11,224 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50254 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:42:11,268 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50254 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: bob"} 
2017-10-09 02:42:11,268 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 02:42:11,268 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50254] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: bob"} 
2017-10-09 02:42:24,611 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50254] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:42:24,611 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 02:42:24,612 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50254 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:42:24,612 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50254 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:42:24,612 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 02:42:24,612 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50254] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:44:39,197 INFO BufferedLoggingWriter [Thread-0] [/127.0.0.1:50254] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"g","USERNAME":""} 
2017-10-09 02:44:39,198 INFO BufferedLoggingWriter [Thread-0] SENT: 
 
2017-10-09 02:44:39,198 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50254 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"g","USERNAME":""} 
2017-10-09 02:44:39,199 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50254 SENT: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-09 02:44:39,199 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 02:44:39,532 FATAL ThreadWithReactor [Thread-4] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:44:39,532 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50254 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:44:39,532 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 02:44:39,532 FATAL Server [Thread-4] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:48:57,313 INFO BufferedLoggingWriter [main] [/127.0.0.1:50293] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:48:57,313 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:48:57,313 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50293 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:48:57,314 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50293 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 02:48:57,314 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 02:48:57,314 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50293] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 02:49:04,492 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50293] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"bob"} 
2017-10-09 02:49:04,493 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:49:04,493 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50293 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"bob"} 
2017-10-09 02:49:04,493 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50293 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:49:04,493 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 02:49:04,493 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50293] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:51:20,124 FATAL ThreadWithReactor [Thread-5] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:51:20,125 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50293 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:51:20,125 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 02:51:20,125 FATAL Server [Thread-5] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 02:51:33,390 INFO BufferedLoggingWriter [main] [/127.0.0.1:50318] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:51:33,391 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 02:51:33,391 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50318 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 02:51:33,391 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50318 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:51:33,391 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 02:51:33,392 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50318] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 02:51:36,319 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50318] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:51:36,320 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 02:51:36,320 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50318 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 02:51:36,320 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50318 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:51:36,320 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 02:51:36,320 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50318] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:51:39,828 INFO BufferedLoggingWriter [Thread-0] [/127.0.0.1:50318] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:51:39,828 INFO BufferedLoggingWriter [Thread-0] SENT: 
 
2017-10-09 02:51:39,828 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50318 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 02:51:39,829 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50318 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 02:51:39,829 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 02:51:39,839 FATAL ThreadWithReactor [Thread-6] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 02:51:39,839 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50318 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 02:51:39,839 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 02:51:39,839 FATAL Server [Thread-6] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 03:00:38,225 INFO BufferedLoggingWriter [main] [/127.0.0.1:50349] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:00:38,226 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 03:00:38,227 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50349 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:00:38,255 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50349 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:00:38,255 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:00:38,255 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50349] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:00:40,319 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50349] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 03:00:40,319 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:00:40,320 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50349 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 03:00:40,320 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50349 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:00:40,320 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:00:40,321 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50349] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:01:10,031 INFO BufferedLoggingWriter [Thread-0] [/127.0.0.1:50349] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 03:01:10,031 INFO BufferedLoggingWriter [Thread-0] SENT: 
 
2017-10-09 03:01:10,031 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50349 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 03:01:10,032 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50349 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 03:01:10,032 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:01:10,046 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 03:01:10,048 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50349 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:01:10,048 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:01:10,048 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 03:03:31,409 INFO BufferedLoggingWriter [main] [/127.0.0.1:50372] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:03:31,409 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 03:03:31,410 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50372 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:03:31,410 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50372 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:03:31,410 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 03:03:31,411 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50372] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:03:35,445 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50372] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 03:03:35,445 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:03:35,445 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50372 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 03:03:35,445 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50372 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:03:35,446 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 03:03:35,446 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50372] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:03:35,451 FATAL ThreadWithReactor [Thread-2] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 03:03:35,451 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50372 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:03:35,451 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 03:03:35,451 FATAL Server [Thread-2] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 03:04:49,120 INFO BufferedLoggingWriter [main] [/127.0.0.1:50378] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:04:49,121 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 03:04:49,121 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50378 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 03:04:49,121 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50378 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:04:49,122 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 03:04:49,122 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50378] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 03:05:56,831 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50378] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"test3","USERNAME":"bob"} 
2017-10-09 03:05:56,831 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 03:05:56,832 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50378 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"test3","USERNAME":"bob"} 
2017-10-09 03:05:56,832 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50378 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Username is already in use."} 
2017-10-09 03:05:56,832 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 03:05:56,832 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50378] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Username is already in use."} 
2017-10-09 03:38:36,226 FATAL ThreadWithReactor [Thread-3] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 03:38:36,233 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50378 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 03:38:36,233 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 03:38:36,233 FATAL Server [Thread-3] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:179)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:21:04,413 INFO BufferedLoggingWriter [main] [/127.0.0.1:61970] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:21:04,414 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:21:04,416 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:61970 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:21:04,444 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:61970 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:21:04,444 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:21:04,444 INFO EventSourceImpl [Thread-0] [/127.0.0.1:61970] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:21:11,517 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:61970] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"book"} 
2017-10-09 12:21:11,517 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:21:11,517 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:61970 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"book"} 
2017-10-09 12:21:11,518 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:61970 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book does not exist."} 
2017-10-09 12:21:11,518 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:21:11,518 INFO EventSourceImpl [Thread-0] [/127.0.0.1:61970] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book does not exist."} 
2017-10-09 12:21:22,276 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:61970] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":123} 
2017-10-09 12:21:22,277 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:21:22,277 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:61970 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":123} 
2017-10-09 12:21:22,277 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:61970 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book does not exists."} 
2017-10-09 12:21:22,277 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:21:22,278 INFO EventSourceImpl [Thread-0] [/127.0.0.1:61970] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book does not exists."} 
2017-10-09 12:26:12,599 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:26:12,601 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:61970 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:26:12,601 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:26:12,602 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:26:52,356 INFO BufferedLoggingWriter [main] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:26:52,357 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:26:52,357 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:26:52,358 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:26:52,358 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:26:52,358 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:27:06,076 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_BOOK","ISBN":12345,"TITLE":"The Book"} 
2017-10-09 12:27:06,076 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:27:06,076 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"ADD_BOOK","ISBN":12345,"TITLE":"The Book"} 
2017-10-09 12:27:06,111 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added book: The Book [12345]"} 
2017-10-09 12:27:06,111 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:27:06,111 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added book: The Book [12345]"} 
2017-10-09 12:27:15,329 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:27:15,329 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:27:15,330 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:27:15,330 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 0]"} 
2017-10-09 12:27:15,330 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:27:15,331 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 0]"} 
2017-10-09 12:27:25,790 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"The Book"} 
2017-10-09 12:27:25,790 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:27:25,790 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"The Book"} 
2017-10-09 12:27:25,791 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 0]"} 
2017-10-09 12:27:25,791 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:27:25,791 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 0]"} 
2017-10-09 12:29:47,821 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:29:47,821 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 12:29:47,821 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:29:47,838 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:29:47,838 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:29:47,838 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:29:54,710 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:29:54,710 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:29:54,710 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:29:54,711 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:29:54,711 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:29:54,711 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:31:15,187 INFO BufferedLoggingWriter [main] [/127.0.0.1:62654] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 12:31:15,188 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:31:15,188 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:62654 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 12:31:15,188 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:62654 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:31:15,188 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:31:15,189 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62654] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:31:18,083 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:62654] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"bob"} 
2017-10-09 12:31:18,083 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:31:18,083 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:62654 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"bob"} 
2017-10-09 12:31:18,083 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:62654 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:31:18,083 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:31:18,084 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62654] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:31:18,091 FATAL ThreadWithReactor [Thread-3] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:31:18,091 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:62654 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:31:18,092 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:31:18,092 FATAL Server [Thread-3] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:31:31,818 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"REMOVE_USER","USERNAME":"bob"} 
2017-10-09 12:31:31,818 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:31:31,818 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"REMOVE_USER","USERNAME":"bob"} 
2017-10-09 12:31:31,826 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully removed user: bob"} 
2017-10-09 12:31:31,826 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:31:31,826 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully removed user: bob"} 
2017-10-09 12:31:43,974 INFO BufferedLoggingWriter [main] [/127.0.0.1:64090] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 12:31:43,974 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:31:43,975 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:64090 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"test1","USERNAME":"bob"} 
2017-10-09 12:31:43,975 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:64090 SENT: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-09 12:31:43,975 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 12:31:43,975 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64090] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-09 12:31:49,309 FATAL ThreadWithReactor [Thread-4] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:31:49,309 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:64090 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:31:49,309 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 12:31:49,309 FATAL Server [Thread-4] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:32:25,406 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:32:25,406 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:32:25,406 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:32:25,413 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: user1"} 
2017-10-09 12:32:25,414 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:32:25,414 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: user1"} 
2017-10-09 12:32:42,731 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:32:42,731 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-09 12:32:42,732 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:32:42,742 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: user2"} 
2017-10-09 12:32:42,742 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:32:42,743 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: user2"} 
2017-10-09 12:33:17,815 INFO BufferedLoggingWriter [main] [/127.0.0.1:64106] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:33:17,816 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:33:17,816 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:64106 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:33:17,817 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:64106 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:33:17,817 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:33:17,817 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64106] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:33:28,098 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:64106] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:33:28,098 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:33:28,098 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:64106 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:33:28,099 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:64106 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:33:28,099 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:33:28,099 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64106] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:33:47,154 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:64106] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MAKE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user1"} 
2017-10-09 12:33:47,154 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:33:47,155 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:64106 RECEIVED: {"MESSAGE":"MAKE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user1"} 
2017-10-09 12:33:47,179 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:64106 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 1 of book: 12345"} 
2017-10-09 12:33:47,179 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:33:47,179 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64106] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 1 of book: 12345"} 
2017-10-09 12:34:10,418 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:64106] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"user1"} 
2017-10-09 12:34:10,418 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:34:10,418 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:64106 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"user1"} 
2017-10-09 12:34:10,419 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:64106 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:10,419 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:34:10,419 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64106] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:10,430 FATAL ThreadWithReactor [Thread-5] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:34:10,431 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:64106 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:10,431 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:34:10,431 FATAL Server [Thread-5] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:34:30,542 INFO BufferedLoggingWriter [main] [/127.0.0.1:64109] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:34:30,542 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:34:30,543 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:64109 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:34:30,543 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:64109 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:34:30,543 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:34:30,543 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64109] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:34:34,866 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:64109] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:34:34,866 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:34:34,866 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:64109 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:34:34,866 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:64109 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:34:34,866 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:34:34,866 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64109] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 1]"} 
2017-10-09 12:34:47,034 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:64109] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MAKE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user2"} 
2017-10-09 12:34:47,034 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:34:47,035 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:64109 RECEIVED: {"MESSAGE":"MAKE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user2"} 
2017-10-09 12:34:47,035 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:64109 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book is already reserved."} 
2017-10-09 12:34:47,035 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:34:47,035 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64109] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book is already reserved."} 
2017-10-09 12:34:51,133 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:64109] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"user2"} 
2017-10-09 12:34:51,133 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:34:51,133 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:64109 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"user2"} 
2017-10-09 12:34:51,134 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:64109 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:51,134 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:34:51,134 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64109] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:51,144 FATAL ThreadWithReactor [Thread-6] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:34:51,144 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:64109 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:34:51,144 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:34:51,144 FATAL Server [Thread-6] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:36:11,453 INFO BufferedLoggingWriter [main] [/127.0.0.1:64139] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:36:11,454 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:36:11,454 INFO EventSourceImpl [Thread-7] [/127.0.0.1:5050] FROM: 127.0.0.1:64139 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"user2"} 
2017-10-09 12:36:11,454 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:5050] TO: 127.0.0.1:64139 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:36:11,454 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:36:11,454 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64139] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:36:21,370 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:64139] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"REMOVE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user2"} 
2017-10-09 12:36:21,370 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:36:21,370 INFO EventSourceImpl [Thread-7] [/127.0.0.1:5050] FROM: 127.0.0.1:64139 RECEIVED: {"MESSAGE":"REMOVE_RESERVATION","ISBN":12345,"COPYNUMBER":1,"USERNAME":"user2"} 
2017-10-09 12:36:21,375 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:5050] TO: 127.0.0.1:64139 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully removed reservation of copy 1of book 12345"} 
2017-10-09 12:36:21,375 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:36:21,375 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64139] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully removed reservation of copy 1of book 12345"} 
2017-10-09 12:36:31,204 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:64139] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"user2"} 
2017-10-09 12:36:31,204 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:36:31,205 INFO EventSourceImpl [Thread-7] [/127.0.0.1:5050] FROM: 127.0.0.1:64139 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"user2"} 
2017-10-09 12:36:31,205 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:5050] TO: 127.0.0.1:64139 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:36:31,205 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:36:31,205 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64139] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:36:31,215 FATAL ThreadWithReactor [Thread-7] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:36:31,216 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:5050] TO: 127.0.0.1:64139 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:36:31,216 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:36:31,216 FATAL Server [Thread-7] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:45:21,794 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:62394] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 12:45:21,795 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-09 12:45:21,795 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:62394 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 12:45:21,796 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:45:21,796 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:45:21,796 INFO EventSourceImpl [Thread-0] [/127.0.0.1:62394] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:45:21,806 FATAL ThreadWithReactor [Thread-2] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:45:21,807 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:62394 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:45:21,807 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:45:21,807 FATAL Server [Thread-2] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:181)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:45:52,867 INFO BufferedLoggingWriter [main] [/127.0.0.1:64196] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pas","USERNAME":"user1"} 
2017-10-09 12:45:52,868 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:45:52,869 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:64196 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pas","USERNAME":"user1"} 
2017-10-09 12:45:52,895 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:64196 SENT: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-09 12:45:52,895 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:45:52,896 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64196] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_FAIL","FAIL_REASON":"Username or password is unvalid."} 
2017-10-09 12:45:59,023 INFO BufferedLoggingWriter [Thread-0] [/127.0.0.1:64196] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:45:59,023 INFO BufferedLoggingWriter [Thread-0] SENT: 
 
2017-10-09 12:45:59,023 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:64196 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"user1"} 
2017-10-09 12:45:59,024 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:64196 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:45:59,024 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:45:59,024 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64196] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-09 12:46:02,817 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:64196] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:46:02,818 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:46:02,818 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:64196 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:46:02,818 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:64196 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 12:46:02,818 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:46:02,819 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64196] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 12:46:29,540 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:64196] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"user1"} 
2017-10-09 12:46:29,540 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:46:29,540 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:64196 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"user1"} 
2017-10-09 12:46:29,541 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:64196 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:46:29,541 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:46:29,541 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64196] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:46:29,556 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 12:46:29,557 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:64196 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 12:46:29,557 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:46:29,558 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 12:46:48,846 INFO BufferedLoggingWriter [main] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:46:48,846 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 12:46:48,847 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 12:46:48,847 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:46:48,847 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:46:48,847 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 12:46:55,270 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:46:55,270 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 12:46:55,271 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:46:55,271 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 12:46:55,271 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:46:55,271 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 12:47:02,586 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user2"} 
2017-10-09 12:47:02,586 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:47:02,586 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user2"} 
2017-10-09 12:47:02,586 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user2, pass2"} 
2017-10-09 12:47:02,586 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:47:02,587 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user2, pass2"} 
2017-10-09 12:47:23,587 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:47:23,587 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 12:47:23,587 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:47:23,606 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:47:23,606 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:47:23,606 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:48:01,012 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:48:01,012 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-09 12:48:01,012 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:48:01,013 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 2]"} 
2017-10-09 12:48:01,013 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:48:01,013 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 2]"} 
2017-10-09 12:48:07,040 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:48:07,040 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-09 12:48:07,040 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:48:07,046 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:48:07,046 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:48:07,046 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:48:16,512 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:48:16,513 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-09 12:48:16,513 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:48:16,513 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 3]"} 
2017-10-09 12:48:16,513 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:48:16,513 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 3]"} 
2017-10-09 12:48:28,462 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"REMOVE_COPY","ISBN":12345,"COPYNUMBER":2} 
2017-10-09 12:48:28,462 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-09 12:48:28,462 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"REMOVE_COPY","ISBN":12345,"COPYNUMBER":2} 
2017-10-09 12:48:28,468 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully removed copy 2from book 12345"} 
2017-10-09 12:48:28,468 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:48:28,468 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully removed copy 2from book 12345"} 
2017-10-09 12:49:00,885 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:49:00,885 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-09 12:49:00,886 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:49:00,891 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:49:00,891 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:49:00,891 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:49:07,971 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:49:07,971 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-09 12:49:07,971 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:49:07,972 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 3]"} 
2017-10-09 12:49:07,972 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:49:07,972 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 3]"} 
2017-10-09 12:49:23,731 INFO BufferedLoggingWriter [Thread-10] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:49:23,731 INFO BufferedLoggingWriter [Thread-10] SENT: 
 
2017-10-09 12:49:23,731 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":12345} 
2017-10-09 12:49:23,744 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:49:23,744 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:49:23,744 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 12345"} 
2017-10-09 12:49:28,861 INFO BufferedLoggingWriter [Thread-11] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:49:28,861 INFO BufferedLoggingWriter [Thread-11] SENT: 
 
2017-10-09 12:49:28,861 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 12:49:28,861 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 12:49:28,861 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:49:28,862 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 12:52:37,366 INFO BufferedLoggingWriter [Thread-12] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"1"} 
2017-10-09 12:52:37,367 INFO BufferedLoggingWriter [Thread-12] SENT: 
 
2017-10-09 12:52:37,367 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"1"} 
2017-10-09 12:52:37,367 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"User does not exist."} 
2017-10-09 12:52:37,368 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:52:37,368 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"User does not exist."} 
2017-10-09 12:52:45,148 INFO BufferedLoggingWriter [Thread-13] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:52:45,148 INFO BufferedLoggingWriter [Thread-13] SENT: 
 
2017-10-09 12:52:45,148 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 12:52:45,148 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 12:52:45,149 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 12:52:45,149 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1"} 
2017-10-09 13:47:49,014 INFO BufferedLoggingWriter [Thread-14] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:47:49,016 INFO BufferedLoggingWriter [Thread-14] SENT: 
 
2017-10-09 13:47:49,022 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:47:49,030 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 13:47:49,030 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 13:47:49,031 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 13:52:53,392 INFO BufferedLoggingWriter [Thread-15] [/127.0.0.1:64198] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:52:53,392 INFO BufferedLoggingWriter [Thread-15] SENT: 
 
2017-10-09 13:52:53,392 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:64198 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:52:53,394 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:52:53,394 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 13:52:53,394 INFO EventSourceImpl [Thread-0] [/127.0.0.1:64198] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:52:53,415 FATAL ThreadWithReactor [Thread-2] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 13:52:53,418 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:64198 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:52:53,418 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 13:52:53,418 FATAL Server [Thread-2] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 13:53:08,525 INFO BufferedLoggingWriter [main] [/127.0.0.1:56075] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 13:53:08,526 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 13:53:08,527 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56075 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 13:53:08,554 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56075 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 13:53:08,554 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:53:08,554 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56075] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 13:53:18,811 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:56075] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 13:53:18,811 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:53:18,811 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56075 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 13:53:18,812 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56075 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\tUser has no reservations\n\tLoans:\n\tUser has no loans"} 
2017-10-09 13:53:18,812 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:53:18,812 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56075] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\tUser has no reservations\n\tLoans:\n\tUser has no loans"} 
2017-10-09 13:53:56,340 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:56075] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:53:56,340 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 13:53:56,340 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56075 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:53:56,341 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56075 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 13:53:56,341 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:53:56,341 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56075] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]"} 
2017-10-09 13:54:38,854 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:56075] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:54:38,854 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 13:54:38,855 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56075 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:54:38,855 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56075 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:54:38,855 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:54:38,855 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56075] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:54:38,867 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 13:54:38,869 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56075 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:54:38,869 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:54:38,869 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 13:54:55,323 INFO BufferedLoggingWriter [main] [/127.0.0.1:56096] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 13:54:55,324 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 13:54:55,325 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56096 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 13:54:55,353 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56096 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 13:54:55,353 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:54:55,353 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56096] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 13:55:00,243 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:56096] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 13:55:00,243 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:55:00,244 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56096 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"user1"} 
2017-10-09 13:55:00,244 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56096 SENT: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans"} 
2017-10-09 13:55:00,244 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:55:00,245 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56096] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans"} 
2017-10-09 13:55:11,821 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:56096] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:55:11,822 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 13:55:11,822 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56096 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":12345} 
2017-10-09 13:55:11,822 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56096 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]\n\t12345 [1]\n\t12345 [2]\n\t12345 [3]\n\t12345 [4]\n"} 
2017-10-09 13:55:11,823 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:55:11,823 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56096] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]\n\t12345 [1]\n\t12345 [2]\n\t12345 [3]\n\t12345 [4]\n"} 
2017-10-09 13:55:27,565 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:56096] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:55:27,566 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-09 13:55:27,566 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56096 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-09 13:55:27,566 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56096 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:55:27,566 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:55:27,566 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56096] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:55:27,580 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 13:55:27,582 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56096 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-09 13:55:27,582 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 13:55:27,582 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-09 14:06:52,294 INFO BufferedLoggingWriter [main] [/127.0.0.1:56175] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 14:06:52,295 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 14:06:52,296 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56175 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 14:06:52,325 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56175 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 14:06:52,325 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:06:52,325 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56175] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 14:07:03,910 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:56175] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"COLLECT_FINE","FEE":20,"USERNAME":"clerk"} 
2017-10-09 14:07:03,910 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:07:03,910 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56175 RECEIVED: {"MESSAGE":"COLLECT_FINE","FEE":20,"USERNAME":"clerk"} 
2017-10-09 14:07:03,911 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56175 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"User does not exist."} 
2017-10-09 14:07:03,911 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:07:03,911 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56175] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"User does not exist."} 
2017-10-09 14:10:01,357 FATAL ThreadWithReactor [Thread-0] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-09 14:10:15,903 INFO BufferedLoggingWriter [main] [/127.0.0.1:56201] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 14:10:15,904 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-09 14:10:15,905 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56201 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-09 14:10:15,932 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56201 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 14:10:15,932 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:10:15,933 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56201] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-09 14:10:26,402 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:56201] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"COLLECT_FINE","FEE":20,"USERNAME":"user1"} 
2017-10-09 14:10:26,402 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:10:26,403 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56201 RECEIVED: {"MESSAGE":"COLLECT_FINE","FEE":20,"USERNAME":"user1"} 
2017-10-09 14:10:26,416 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56201 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully collected fee for user: user1"} 
2017-10-09 14:10:26,416 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:10:26,416 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56201] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully collected fee for user: user1"} 
2017-10-09 14:10:47,100 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:56201] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-09 14:10:47,101 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-09 14:10:47,101 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:56201 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-09 14:10:47,102 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:56201 SENT: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]\n\t12345 [1]\n\t12345 [2]\n\t12345 [3]\n\t12345 [4]\n[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans[0]: user2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans"} 
2017-10-09 14:10:47,102 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-09 14:10:47,102 INFO EventSourceImpl [Thread-0] [/127.0.0.1:56201] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"12345, The Book [Copies: 4]\n\t12345 [1]\n\t12345 [2]\n\t12345 [3]\n\t12345 [4]\n[0]: user1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans[0]: user2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans"} 
2017-10-10 19:17:07,040 INFO BufferedLoggingWriter [main] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:17:07,041 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:17:07,042 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:17:07,370 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:17:07,370 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:17:07,370 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:17:21,137 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:17:21,137 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:17:21,137 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:17:21,138 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":""} 
2017-10-10 19:17:21,138 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:17:21,138 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":""} 
2017-10-10 19:17:56,931 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_BOOK","ISBN":1234567890,"TITLE":"Test Book"} 
2017-10-10 19:17:56,931 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:17:56,931 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_BOOK","ISBN":1234567890,"TITLE":"Test Book"} 
2017-10-10 19:17:56,968 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added book: Test Book [1234567890]"} 
2017-10-10 19:17:56,968 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:17:56,968 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added book: Test Book [1234567890]"} 
2017-10-10 19:18:03,863 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:18:03,863 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:18:03,863 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:18:03,864 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 0]\n"} 
2017-10-10 19:18:03,864 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:03,864 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 0]\n"} 
2017-10-10 19:18:15,227 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:18:15,227 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:18:15,228 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:18:15,229 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 0]\n"} 
2017-10-10 19:18:15,229 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:15,229 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 0]\n"} 
2017-10-10 19:18:21,992 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:18:21,992 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:18:21,992 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:18:22,000 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:18:22,001 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:22,001 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:18:29,398 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:18:29,398 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:18:29,398 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:18:29,404 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:18:29,404 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:29,404 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:18:35,915 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:18:35,916 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-10 19:18:35,916 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:18:35,916 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [2]\n"} 
2017-10-10 19:18:35,916 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:35,917 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [2]\n"} 
2017-10-10 19:18:49,172 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:18:49,172 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-10 19:18:49,172 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:18:49,184 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: test1"} 
2017-10-10 19:18:49,184 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:49,185 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: test1"} 
2017-10-10 19:18:54,424 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:18:54,424 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-10 19:18:54,424 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:18:54,425 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:18:54,425 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:18:54,425 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:19:04,904 INFO BufferedLoggingWriter [Thread-10] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_USER","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:19:04,904 INFO BufferedLoggingWriter [Thread-10] SENT: 
 
2017-10-10 19:19:04,904 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_USER","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:19:04,911 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: test2"} 
2017-10-10 19:19:04,911 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:19:04,911 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added user: test2"} 
2017-10-10 19:19:12,136 INFO BufferedLoggingWriter [Thread-11] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:19:12,136 INFO BufferedLoggingWriter [Thread-11] SENT: 
 
2017-10-10 19:19:12,136 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:19:12,137 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:19:12,137 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:19:12,137 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:19:18,696 INFO BufferedLoggingWriter [Thread-12] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:19:18,696 INFO BufferedLoggingWriter [Thread-12] SENT: 
 
2017-10-10 19:19:18,696 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:19:18,697 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [2]\n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:19:18,697 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:19:18,697 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [2]\n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:19:33,568 INFO BufferedLoggingWriter [Thread-13] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:19:33,568 INFO BufferedLoggingWriter [Thread-13] SENT: 
 
2017-10-10 19:19:33,569 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"ADD_COPY","ISBN":1234567890} 
2017-10-10 19:19:33,574 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:19:33,575 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:19:33,575 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully added copy to book 1234567890"} 
2017-10-10 19:19:44,112 INFO BufferedLoggingWriter [Thread-14] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"REMOVE_COPY","ISBN":1234567890,"COPYNUMBER":2} 
2017-10-10 19:19:44,112 INFO BufferedLoggingWriter [Thread-14] SENT: 
 
2017-10-10 19:19:44,113 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"REMOVE_COPY","ISBN":1234567890,"COPYNUMBER":2} 
2017-10-10 19:19:44,121 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully removed copy 2 from book 1234567890"} 
2017-10-10 19:19:44,121 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:19:44,121 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50539] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully removed copy 2 from book 1234567890"} 
2017-10-10 19:19:49,775 INFO BufferedLoggingWriter [Thread-15] [/127.0.0.1:50539] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:19:49,775 INFO BufferedLoggingWriter [Thread-15] SENT: 
 
2017-10-10 19:19:49,776 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50539 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:19:49,777 FATAL Server [Thread-1] Something went wrong 
java.lang.NullPointerException
	at com.comp4004.server.ServerController.bookInfo(ServerController.java:368)
	at com.comp4004.server.ServerController.monitorSystem(ServerController.java:224)
	at com.comp4004.server.Server$MonitorSystem.handleEvent(Server.java:468)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:59)
2017-10-10 19:22:31,866 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:22:31,867 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50539 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:22:31,867 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:31,867 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:22:45,221 INFO BufferedLoggingWriter [main] [/127.0.0.1:50587] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:22:45,221 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:22:45,222 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50587 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:22:45,236 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50587 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:22:45,236 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:45,236 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50587] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:22:48,309 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50587] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:22:48,309 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:48,310 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50587 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:22:48,310 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50587 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3]\n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:22:48,311 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:48,311 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50587] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3]\n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:22:58,879 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50587] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-10 19:22:58,879 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:22:58,879 INFO EventSourceImpl [Thread-1] [/127.0.0.1:5050] FROM: 127.0.0.1:50587 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-10 19:22:58,880 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50587 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:22:58,880 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:58,880 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50587] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:22:58,911 FATAL ThreadWithReactor [Thread-1] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:22:58,913 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:5050] TO: 127.0.0.1:50587 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:22:58,913 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:22:58,913 FATAL Server [Thread-1] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:23:06,717 INFO BufferedLoggingWriter [main] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:23:06,717 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:23:06,718 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:23:06,718 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:23:06,718 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:06,719 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:23:09,695 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:23:09,696 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:23:09,696 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:23:09,696 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:23:09,697 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:09,697 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:23:18,180 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"Test book"} 
2017-10-10 19:23:18,180 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:18,181 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"Test book"} 
2017-10-10 19:23:18,181 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3]\n"} 
2017-10-10 19:23:18,181 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:18,182 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3]\n"} 
2017-10-10 19:23:33,947 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":2,"USERNAME":"test1"} 
2017-10-10 19:23:33,947 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:23:33,948 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":2,"USERNAME":"test1"} 
2017-10-10 19:23:33,949 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Copy does not exists."} 
2017-10-10 19:23:33,949 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:33,949 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Copy does not exists."} 
2017-10-10 19:23:44,916 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:23:44,916 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:23:44,917 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:23:44,935 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 1 of book: 1234567890"} 
2017-10-10 19:23:44,935 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:44,935 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 1 of book: 1234567890"} 
2017-10-10 19:23:49,980 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:23:49,981 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:23:49,981 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:23:49,981 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [1]\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:23:49,981 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:23:49,982 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [1]\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:24:13,734 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:24:13,734 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:24:13,735 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:24:13,735 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3]\n"} 
2017-10-10 19:24:13,735 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:24:13,735 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3]\n"} 
2017-10-10 19:24:31,626 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:50588] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"test1"} 
2017-10-10 19:24:31,627 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-10 19:24:31,627 INFO EventSourceImpl [Thread-2] [/127.0.0.1:5050] FROM: 127.0.0.1:50588 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"test1"} 
2017-10-10 19:24:31,627 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:24:31,628 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:24:31,628 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50588] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:24:31,657 FATAL ThreadWithReactor [Thread-2] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:24:31,658 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:5050] TO: 127.0.0.1:50588 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:24:31,658 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:24:31,658 FATAL Server [Thread-2] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:24:43,111 INFO BufferedLoggingWriter [main] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:24:43,112 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:24:43,112 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:24:43,113 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:24:43,113 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:24:43,113 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:24:50,412 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:24:50,412 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:24:50,413 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:24:50,413 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:24:50,413 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:24:50,413 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:24:57,044 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:24:57,044 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:24:57,044 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:24:57,045 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3]\n"} 
2017-10-10 19:24:57,045 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:24:57,045 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3]\n"} 
2017-10-10 19:25:06,704 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:25:06,705 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:06,705 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:25:06,705 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book is already reserved."} 
2017-10-10 19:25:06,705 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:06,706 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book is already reserved."} 
2017-10-10 19:25:15,351 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:25:15,351 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:25:15,352 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:25:15,377 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 3 of book: 1234567890"} 
2017-10-10 19:25:15,377 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:15,377 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 3 of book: 1234567890"} 
2017-10-10 19:25:18,089 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:25:18,089 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:25:18,089 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:25:18,091 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 0\n"} 
2017-10-10 19:25:18,091 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:18,091 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 0\n"} 
2017-10-10 19:25:38,246 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:25:38,246 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:25:38,246 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:25:38,247 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n"} 
2017-10-10 19:25:38,247 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:38,247 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n"} 
2017-10-10 19:25:49,499 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:25:49,499 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-10 19:25:49,499 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:25:49,506 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 3 of book: 1234567890"} 
2017-10-10 19:25:49,506 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:49,506 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 3 of book: 1234567890"} 
2017-10-10 19:25:53,598 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:25:53,598 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-10 19:25:53,599 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:25:53,599 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:25:53,600 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:25:53,600 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:26:04,849 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:26:04,849 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-10 19:26:04,849 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:26:04,850 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n"} 
2017-10-10 19:26:04,850 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:26:04,850 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n"} 
2017-10-10 19:26:08,723 INFO BufferedLoggingWriter [Thread-10] [/127.0.0.1:50627] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"test2"} 
2017-10-10 19:26:08,724 INFO BufferedLoggingWriter [Thread-10] SENT: 
 
2017-10-10 19:26:08,724 INFO EventSourceImpl [Thread-3] [/127.0.0.1:5050] FROM: 127.0.0.1:50627 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"test2"} 
2017-10-10 19:26:08,724 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:08,724 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:26:08,724 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50627] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:08,742 FATAL ThreadWithReactor [Thread-3] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:26:08,742 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:5050] TO: 127.0.0.1:50627 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:08,742 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:26:08,742 FATAL Server [Thread-3] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:26:13,508 INFO BufferedLoggingWriter [main] [/127.0.0.1:50633] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:26:13,509 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:26:13,509 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50633 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"admin","USERNAME":"clerk"} 
2017-10-10 19:26:13,509 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50633 SENT: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:26:13,509 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:26:13,510 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50633] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS","ADMIN":""} 
2017-10-10 19:26:19,035 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50633] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:26:19,035 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:26:19,035 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50633 RECEIVED: {"MESSAGE":"MONITOR_SYSTEM"} 
2017-10-10 19:26:19,036 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50633 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [1]\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:26:19,036 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:26:19,036 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50633] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] \n[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [1]\n\tLoans:\n\t\tUser has no loans\n[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:26:36,906 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50633] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-10 19:26:36,906 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:26:36,907 INFO EventSourceImpl [Thread-4] [/127.0.0.1:5050] FROM: 127.0.0.1:50633 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"clerk"} 
2017-10-10 19:26:36,907 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50633 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:36,907 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:26:36,907 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50633] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:36,923 FATAL ThreadWithReactor [Thread-4] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:26:36,924 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:5050] TO: 127.0.0.1:50633 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:26:36,924 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:26:36,924 FATAL Server [Thread-4] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:26:41,588 INFO BufferedLoggingWriter [main] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:26:41,589 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:26:41,589 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass1","USERNAME":"test1"} 
2017-10-10 19:26:41,590 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:26:41,590 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:26:41,590 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:26:58,020 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test1"} 
2017-10-10 19:26:58,020 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:26:58,020 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"MAKE_RESERVATION","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test1"} 
2017-10-10 19:26:58,027 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 3 of book: 1234567890"} 
2017-10-10 19:26:58,027 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:26:58,027 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully reserved copy 3 of book: 1234567890"} 
2017-10-10 19:27:05,497 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:27:05,497 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:27:05,497 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:27:05,498 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:27:05,498 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:27:05,498 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][RESERVED]\n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:27:26,922 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:27:26,922 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:27:26,922 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:27:26,935 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 1 of book: 1234567890"} 
2017-10-10 19:27:26,935 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:27:26,935 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 1 of book: 1234567890"} 
2017-10-10 19:27:35,165 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:27:35,165 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:27:35,165 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"SEARCH_BOOK","ISBN":1234567890} 
2017-10-10 19:27:35,166 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][LOANED] \n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:27:35,166 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:27:35,166 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1][LOANED] \n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:27:55,166 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:27:55,166 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:27:55,166 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test1"} 
2017-10-10 19:27:55,170 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully returned copy 1 of book: 1234567890"} 
2017-10-10 19:27:55,170 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:27:55,170 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully returned copy 1 of book: 1234567890"} 
2017-10-10 19:28:04,849 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test1"} 
2017-10-10 19:28:04,849 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:28:04,849 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test1"} 
2017-10-10 19:28:04,849 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Loan does not exists."} 
2017-10-10 19:28:04,850 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:28:04,850 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Loan does not exists."} 
2017-10-10 19:28:10,510 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:28:10,510 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-10 19:28:10,510 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test1"} 
2017-10-10 19:28:10,510 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [3]\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:28:10,511 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:28:10,511 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[1]: test1, pass1\n\tFees: 0\n\tReservations:\n\t\t1 [1234567890] [3]\n\tLoans:\n\t\tUser has no loans\n"} 
2017-10-10 19:28:17,165 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:28:17,165 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-10 19:28:17,165 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"SEARCH_BOOK","TITLE":"test book"} 
2017-10-10 19:28:17,166 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:28:17,166 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:28:17,166 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"1234567890, Test Book [Copies: 2]\n\t1234567890 [1]\n\t1234567890 [3][LOANED] [RESERVED]\n"} 
2017-10-10 19:28:19,882 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:50636] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"test1"} 
2017-10-10 19:28:19,882 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-10 19:28:19,882 INFO EventSourceImpl [Thread-5] [/127.0.0.1:5050] FROM: 127.0.0.1:50636 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"test1"} 
2017-10-10 19:28:19,883 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:28:19,883 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:28:19,883 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50636] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:28:19,894 FATAL ThreadWithReactor [Thread-5] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:28:19,894 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:5050] TO: 127.0.0.1:50636 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:28:19,894 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:28:19,895 FATAL Server [Thread-5] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
2017-10-10 19:28:25,332 INFO BufferedLoggingWriter [main] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:28:25,332 INFO BufferedLoggingWriter [main] SENT: 
 
2017-10-10 19:28:25,333 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"LOGIN","PASSWORD":"pass2","USERNAME":"test2"} 
2017-10-10 19:28:25,333 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:28:25,333 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:28:25,333 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"CONNECT_PASS"} 
2017-10-10 19:28:33,422 INFO BufferedLoggingWriter [Thread-1] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:28:33,422 INFO BufferedLoggingWriter [Thread-1] SENT: 
 
2017-10-10 19:28:33,422 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:28:33,423 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book is reserved."} 
2017-10-10 19:28:33,423 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:28:33,423 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book is reserved."} 
2017-10-10 19:28:46,145 INFO BufferedLoggingWriter [Thread-2] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:28:46,145 INFO BufferedLoggingWriter [Thread-2] SENT: 
 
2017-10-10 19:28:46,146 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":3,"USERNAME":"test2"} 
2017-10-10 19:28:46,146 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"Book is reserved."} 
2017-10-10 19:28:46,146 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:28:46,147 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"Book is reserved."} 
2017-10-10 19:28:49,950 INFO BufferedLoggingWriter [Thread-3] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:28:49,950 INFO BufferedLoggingWriter [Thread-3] SENT: 
 
2017-10-10 19:28:49,950 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:28:49,951 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:28:49,951 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:28:49,951 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:29:03,827 INFO BufferedLoggingWriter [Thread-4] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:03,827 INFO BufferedLoggingWriter [Thread-4] SENT: 
 
2017-10-10 19:29:03,828 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"BORROW","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:03,833 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 1 of book: 1234567890"} 
2017-10-10 19:29:03,833 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:03,834 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully borrowed copy 1 of book: 1234567890"} 
2017-10-10 19:29:06,317 INFO BufferedLoggingWriter [Thread-5] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:06,317 INFO BufferedLoggingWriter [Thread-5] SENT: 
 
2017-10-10 19:29:06,317 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:06,318 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 0\n"} 
2017-10-10 19:29:06,318 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:06,318 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 0\n"} 
2017-10-10 19:29:16,156 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:16,156 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:16,157 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:16,164 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 1 of book: 1234567890"} 
2017-10-10 19:29:16,164 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:16,164 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 1 of book: 1234567890"} 
2017-10-10 19:29:18,936 INFO BufferedLoggingWriter [Thread-7] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:18,936 INFO BufferedLoggingWriter [Thread-7] SENT: 
 
2017-10-10 19:29:18,936 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:18,937 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 1\n"} 
2017-10-10 19:29:18,937 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:18,937 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 1\n"} 
2017-10-10 19:29:25,943 INFO BufferedLoggingWriter [Thread-8] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:25,944 INFO BufferedLoggingWriter [Thread-8] SENT: 
 
2017-10-10 19:29:25,944 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:25,950 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 1 of book: 1234567890"} 
2017-10-10 19:29:25,950 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:25,950 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully renewed loan of copy 1 of book: 1234567890"} 
2017-10-10 19:29:31,249 INFO BufferedLoggingWriter [Thread-9] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:31,249 INFO BufferedLoggingWriter [Thread-9] SENT: 
 
2017-10-10 19:29:31,250 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:29:31,250 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 2\n"} 
2017-10-10 19:29:31,250 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:31,250 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 2\n"} 
2017-10-10 19:29:55,746 INFO BufferedLoggingWriter [Thread-10] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:55,746 INFO BufferedLoggingWriter [Thread-10] SENT: 
 
2017-10-10 19:29:55,746 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RENEW_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:29:55,746 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"FAILED","FAIL_REASON":"The max amount of renews for this book has been reached."} 
2017-10-10 19:29:55,747 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:29:55,747 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"FAILED","FAIL_REASON":"The max amount of renews for this book has been reached."} 
2017-10-10 19:30:04,709 INFO BufferedLoggingWriter [Thread-11] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:30:04,709 INFO BufferedLoggingWriter [Thread-11] SENT: 
 
2017-10-10 19:30:04,709 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:30:04,710 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 2\n"} 
2017-10-10 19:30:04,710 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:30:04,710 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n\t\t1234567890 [1] Date: 2017-10-10 07:29 User: 2 Renewed: 2\n"} 
2017-10-10 19:30:15,422 INFO BufferedLoggingWriter [Thread-12] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:30:15,422 INFO BufferedLoggingWriter [Thread-12] SENT: 
 
2017-10-10 19:30:15,422 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"RETURN_LOAN","ISBN":1234567890,"COPYNUMBER":1,"USERNAME":"test2"} 
2017-10-10 19:30:15,424 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"Successfully returned copy 1 of book: 1234567890"} 
2017-10-10 19:30:15,424 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:30:15,425 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"Successfully returned copy 1 of book: 1234567890"} 
2017-10-10 19:30:20,017 INFO BufferedLoggingWriter [Thread-13] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:30:20,017 INFO BufferedLoggingWriter [Thread-13] SENT: 
 
2017-10-10 19:30:20,017 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"SEARCH_USER","USERNAME":"test2"} 
2017-10-10 19:30:20,017 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:30:20,017 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:30:20,018 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"SUCCESS","REASON":"[2]: test2, pass2\n\tFees: 0\n\tReservations:\n\t\tUser has no reservations\n\tLoans:\n\t\t1234567890 [3] Date: 2017-10-10 07:25 User: 2 Renewed: 1\n"} 
2017-10-10 19:30:23,829 INFO BufferedLoggingWriter [Thread-14] [/127.0.0.1:50647] TO: 127.0.0.1:5050 SENT: {"MESSAGE":"LOGOUT","USERNAME":"test2"} 
2017-10-10 19:30:23,829 INFO BufferedLoggingWriter [Thread-14] SENT: 
 
2017-10-10 19:30:23,829 INFO EventSourceImpl [Thread-6] [/127.0.0.1:5050] FROM: 127.0.0.1:50647 RECEIVED: {"MESSAGE":"LOGOUT","USERNAME":"test2"} 
2017-10-10 19:30:23,829 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:30:23,829 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:30:23,829 INFO EventSourceImpl [Thread-0] [/127.0.0.1:50647] FROM: 127.0.0.1:5050 RECEIVED: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:30:23,845 FATAL ThreadWithReactor [Thread-6] IOException, closing connection. 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
	at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
	at sun.nio.cs.StreamDecoder.read(Unknown Source)
	at java.io.InputStreamReader.read(Unknown Source)
	at java.io.BufferedReader.fill(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at java.io.BufferedReader.readLine(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.getEvent(EventSourceImpl.java:69)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:56)
2017-10-10 19:30:23,845 INFO BufferedLoggingWriter [Thread-6] [/127.0.0.1:5050] TO: 127.0.0.1:50647 SENT: {"MESSAGE":"LOGOUT"} 
2017-10-10 19:30:23,845 INFO BufferedLoggingWriter [Thread-6] SENT: 
 
2017-10-10 19:30:23,845 FATAL Server [Thread-6] Something went wrong 
java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
	at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
	at sun.nio.cs.StreamEncoder.flush(Unknown Source)
	at java.io.OutputStreamWriter.flush(Unknown Source)
	at java.io.BufferedWriter.flush(Unknown Source)
	at com.comp4004.communication.EventSourceImpl.write(EventSourceImpl.java:93)
	at com.comp4004.server.Server$Logout.handleEvent(Server.java:183)
	at com.comp4004.communication.Reactor.dispatch(Reactor.java:25)
	at com.comp4004.communication.ThreadWithReactor.dispatch(ThreadWithReactor.java:92)
	at com.comp4004.communication.ThreadWithReactor.quit(ThreadWithReactor.java:41)
	at com.comp4004.communication.ThreadWithReactor.run(ThreadWithReactor.java:75)
